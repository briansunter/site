name: Links
on: [push, pull_request]
jobs:
  CI:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v1

      - name: Install
        run: npm ci

      - name: build
        run: npm run build

      - name: Check links using script
        env:
          INPUT_URL: https://briansunter.com
          INPUT_PAGES_PATH: ./dist/
          INPUT_CMD_PARAMS: --skip-tls-verification --header="User-Agent:Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1"  --verbose --color=always -e linkedin -e googletagmanager -e googleapis -e twitter -e apple
          INPUT_RUN_TIMEOUT: 100
          INPUT_DEBUG: true
        run: wget -qO- https://raw.githubusercontent.com/ruzickap/action-my-broken-link-checker/v2/entrypoint.sh | bash
